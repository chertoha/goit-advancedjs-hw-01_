{"version":3,"file":"03-feedback-45c5e1b4.js","sources":["../../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nconst FORM_STORAGE_KEY = 'feedback-form-state';\n\nconst form = document.querySelector('.feedback-form');\nconst fields = form.querySelectorAll('[name]');\n\nlet state = getPersistedState();\nfillFields();\n\nform.addEventListener('input', throttle(onInput, 500));\nform.addEventListener('submit', onSubmit);\n\n// --------------------- Helpers\nfunction onInput(e) {\n  const { name, value } = e.target;\n  state = { ...state, [name]: value };\n  persistState(state);\n}\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  console.log(state);\n  clearPersistedState();\n  form.reset();\n}\n\nfunction getPersistedState() {\n  const state = localStorage.getItem(FORM_STORAGE_KEY);\n  return state ? JSON.parse(state) : {};\n}\n\nfunction persistState(state) {\n  localStorage.setItem(FORM_STORAGE_KEY, JSON.stringify(state));\n}\n\nfunction clearPersistedState() {\n  localStorage.removeItem(FORM_STORAGE_KEY);\n  state = {};\n}\n\nfunction fillFields() {\n  fields.forEach(field => {\n    field.value = state[field.name] || '';\n  });\n}\n"],"names":["FORM_STORAGE_KEY","form","fields","state","getPersistedState","fillFields","throttle","onInput","onSubmit","e","name","value","persistState","clearPersistedState","field"],"mappings":"4GACA,MAAMA,EAAmB,sBAEnBC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAASD,EAAK,iBAAiB,QAAQ,EAE7C,IAAIE,EAAQC,EAAiB,EAC7BC,IAEAJ,EAAK,iBAAiB,QAASK,EAASC,EAAS,GAAG,CAAC,EACrDN,EAAK,iBAAiB,SAAUO,CAAQ,EAGxC,SAASD,EAAQE,EAAG,CAClB,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAE,OAC1BN,EAAQ,CAAE,GAAGA,EAAO,CAACO,CAAI,EAAGC,CAAK,EACjCC,EAAaT,CAAK,CACpB,CAEA,SAASK,EAASC,EAAG,CACnBA,EAAE,eAAc,EAChB,QAAQ,IAAIN,CAAK,EACjBU,IACAZ,EAAK,MAAK,CACZ,CAEA,SAASG,GAAoB,CAC3B,MAAMD,EAAQ,aAAa,QAAQH,CAAgB,EACnD,OAAOG,EAAQ,KAAK,MAAMA,CAAK,EAAI,CAAA,CACrC,CAEA,SAASS,EAAaT,EAAO,CAC3B,aAAa,QAAQH,EAAkB,KAAK,UAAUG,CAAK,CAAC,CAC9D,CAEA,SAASU,GAAsB,CAC7B,aAAa,WAAWb,CAAgB,EACxCG,EAAQ,CAAA,CACV,CAEA,SAASE,GAAa,CACpBH,EAAO,QAAQY,GAAS,CACtBA,EAAM,MAAQX,EAAMW,EAAM,IAAI,GAAK,EACvC,CAAG,CACH"}